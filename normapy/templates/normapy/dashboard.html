{% load static %}
<head>
    <meta charset="UTF-8">
    <title>Dashboard de Importaciones</title>
    <link rel="stylesheet" href="{% static 'branding.css' %}">
    <style>
        table { border-collapse: collapse; width: 100%; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 8px; }
        th { background-color: #f4f4f4; }
    </style>
</head>
<body>
    <header>
        <img src="{% static 'normapy/logo.png' %}" alt="Logo NormaPy"> NormaPy
    </header>
    <h1>Dashboard de Importaciones</h1>
    <nav style="text-align:center; margin-bottom:20px;">
        <a href="{% url 'importar_archivo' %}" class="import-button">Importar productos</a>
        <a href="{% url 'listar_productos' %}" class="import-button" style="background-color:#17a2b8;">Ver productos</a>
        <a href="{% url 'historial_importaciones' %}" class="import-button" style="background-color:#ffc107; color:#333;">Historial</a>
        <a href="{% url 'dashboard' %}" class="import-button" style="background-color:#6f42c1;">Dashboard</a>
    </nav>
<h1>Dashboard de Importaciones</h1>
<ul>
    <li><strong>Total de productos importados:</strong> {{ total_productos }}</li>
    <li><strong>Total de importaciones:</strong> {{ total_importaciones }}</li>
    <li><strong>Usuario con más importaciones:</strong> {{ usuario_top.usuario__username }} ({{ usuario_top.total }})</li>
    <li><strong>Último archivo subido:</strong> {{ ultimo_archivo.archivo_nombre }} ({{ ultimo_archivo.fecha|date:"Y-m-d H:i" }})</li>
</ul>

<h2>Productos por marca</h2>
<table border="1" cellpadding="6">
    <tr>
        <th>Marca</th>
        <th>Total</th>
    </tr>
    {% for marca in productos_por_marca %}
    <tr>
        <td>{{ marca.marca }}</td>
        <td>{{ marca.total }}</td>
    </tr>
    {% endfor %}
</table>

<h2>Importaciones por mes</h2>
<table border="1" cellpadding="6">
    <tr>
        <th>Mes</th>
        <th>Total importaciones</th>
    </tr>
    {% for mes in importaciones_por_mes %}
    <tr>
        <td>{{ mes.mes }}</td>
        <td>{{ mes.total }}</td>
    </tr>
    {% endfor %}
</table> 